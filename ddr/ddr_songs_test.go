package ddr

import (
	"bytes"
	"fmt"
	"github.com/PuerkitoBio/goquery"
	"github.com/chris-sg/eagate/util"
	"github.com/chris-sg/eagate_models/ddr_models"
	"io/ioutil"
	"net/http"
	"net/http/httptest"
	"strings"
	"testing"
)

func documentFromFile(file string) (document *goquery.Document, err error) {
	fileContents, err := ioutil.ReadFile(file)
	if err != nil {
		return
	}
	reader := bytes.NewReader(fileContents)
	document, err = goquery.NewDocumentFromReader(reader)
	return
}

func testServerAndClient(uriMapping map[string]string) (util.EaClient, *httptest.Server) {
	ts := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
	}))
	client := util.GenerateClient()
	client.SetTestClient(ts, uriMapping)

	return client, ts
}

func TestPageCountFromMusicDataDocument(t *testing.T) {
	// Setup test
	const testFile = "./test_data/music_data_single/music_data_single_0.html"
	const expectedPageCount = 3

	// Run Test
	document, err := documentFromFile(testFile)
	if err != nil {
		t.Fatalf("could not load %s: %s", testFile, err.Error())
	}

	pageCount := pageCountFromMusicDataDocument(document)
	if pageCount != expectedPageCount {
		t.Errorf("expected a page count of %d, got %d", expectedPageCount, pageCount)
	}
}

func TestSongIdsFromMusicDataDocument(t *testing.T) {

}

func TestSongIdsForClient(t *testing.T) {
	// Setup test
	const musicDataSingleDir = "./test_data/music_data_single"
	const musicDataSingleUri = "https://p.eagate.573.jp/game/ddr/ddra20/p/playdata/music_data_single.html?offset={page}&filter=0&filtertype=0&sorttype=0"
	uriMapping := make(map[string]string)
	files, err := ioutil.ReadDir(musicDataSingleDir)
	if err != nil {
		t.Fatalf("failed to load file list from dir %s", musicDataSingleDir)
	}
	for i, file := range files {
		uri := strings.Replace(musicDataSingleUri, "{page}", fmt.Sprintf("%d", i), -1)
		uriMapping[uri] = fmt.Sprintf("%s/%s", musicDataSingleDir, file.Name())
	}

	c, s := testServerAndClient(uriMapping)
	defer s.Close()

	// Setup expected results

	expectedSongIds := []string{
		"QPd01OQqbOIiDoO1dbdo1IIbb60bqPdl", "OboID1PloIIoOOObQdQOP110I61Ddl9I", "918oPDQDoPlD1OlqlqQI08I6dD9iqoil", "16bl8D8lOddP9Obq0OIlOI6q8Pi1l9O0", "06O0ObdQobq86lPDo6P18dQ1QPdilIQO",
		"d0DDd1dP6llPbioqPdiQ0IDd918bDqI8", "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo", "1d9lDIl6iiiD0D0d8qd6dlDlq6P8o0QI", "Oq900IIl1Ob8qoIPqDP0PD6blbqIqlP1", "61oIP0QIlO90d18ObDP1Dii6PoIQoOD8",
		"ibI0QllidqQ089ql8dob6bIoodbbIoqq", "16IqQ680IioldO69QD61liQod0DQ8boQ", "bd8oD0iqDQ8Qobd1oIqi8981QbD6I6Iq", "80PdqQ0iiOQb9i91lIliodiO9PI8O609", "oQolO9oOO01ll0I8969i8O1IQliloDqP",
		"lqI8DD9Plq6IO8P8P6Pl8Di98DlI9oP8", "9I00D9Id61iD6QP8i8Dd6698PoQ9bdi9", "ilD80b8QQl9Qo0PP0lQ00b8bO9Oqoobo", "i91q8l0bbi8qll000ob6qDiQP891iiql", "qdQoQli1d8DP0Obb919I6P1Odilib1Dd",
		"I96dOqqqQIi9oiqbqDPbQ8I8PQbqOb1o", "oPP1Pdl6Qdlb8oq10PP1doDibdbbl9bl", "0Ib6qIb0iPOoQqqDIl90dP0PI0o9QlDd", "l9lq19DdiD8qQPoPOlboi1qQii0IQI86", "qIqqdd1Odqi1Iiolq9qqPOi0bPPld8Pb",
		"l1lO999PqIboPQOD86PDQo1ol1iIiiOi", "ql1Q8P100IIlbl0Pdi08I8qD900idqQq", "id1lodDbo0Iq9088Qd19d1OlDPP01D8o", "i89IO1PPOl0boOol0bQI19Q9liQ0l6O1", "QIDd80o0OqobODP00ldQ1D9dl81qQi0d",
		"QoDQ0oq08QqiI0DQ8dIPb10qIi6d6i89", "8Q8OiP8QPbl8bqID1loQq896ldPQd99o", "q6iD8idqo69qIPl00IQidoq1o1o1d1b9", "16oDDIlP8bIODQ6Ql0881d9Qqdb19b98", "IbDoODD9qb66Iqd6DbOQiOoDll1DqiO9",
		"Pd1d96Q91oiboqb86DdddD68dbq81Pdo", "qiDOD0iidOli9l0qbP6IbOD19OQ8D8Po", "QlID98Ddoi6O8lP8IQd6iid610011l60", "I1qd16dPdqPi96ql0lP10OQDbo11D89P", "Q9Q088PPd0bPi9QQ8iil1lQqPdiQP69D",
		"i9il1DIDl91Db0OdllOddIqO600Pl89q", "qilOP8l6bDPi98lqDbO6O1obOi068QOQ", "bo9l0Dl0PbqQQQ16Qq6bOOi68o0996Pq", "qbbPQoqqqiPd98d61P0qDd0iDId6OqoQ", "9idOOIdDO01D8PO06bOPPbOIOoiQ8O0P",
		"O9qDQOQO8dDDIiO9dPP0Pb8qQo9l89D9", "911lId0IooIOq1oDPoQ0iQiDiOIbd6oo", "doIiQl6oDPP6i9qobqoobblPQqPiI9bD", "1P9bqO00bIQ0q8d1Q80l0Dq8oi6boqb0", "D11ldIqD8dQIi9oQQIIo86QOI8D9olP8",
		"oQ8oqddQOObiq0ldo68i1d6o1IidObi6", "OoQoQIP06Doq1d88dDQQdlQ8i68Do9DO", "0d8Q9I86lo8oDlQiPd81ll66ob0qli89", "6dO6i9qq601D8ild9QIlbO8bodbiQ1Pl", "lIlold9IQbDb0d6IdP6600DOQIDb9dOP",
		"DIiQbd09D0PoIiPl9iP1q8qldOOqol8i", "dlqPb1iqPo81qI89816QIoi01b1b0P06", "qoidddb08iIoDOo9DQoO0loPl8lPQ81o", "PldO10PIiQ6lOiI16o060OQIiq69QO96", "80d8obPdlobP9qlqiDb01999o01q6DdP",
		"ibI69PPO1iP0D1IlI0bb11QOq6081POo", "666ObIO9bO8D8q8q08I1OQo96DdIbbiO", "ld8lOqloqD6lOl880ldDo819bDb9q1Qi", "I8diIQiPO90qDD60oQ0o669I99dI69DD", "IQ0ID09qD6O1oOdIq0oilI8I8l9DlP9b",
		"bq8DOQ9Idq9Ii9PQ1bqPIQoQPl961d1o", "D0Qb898oqblPoP68PPq1o9i9dI9o0D9i", "9obIQOP8O1l0PQ0Oi1oPQI198o0Pd81o", "P869didbP8Q69IQ0dIqo1ibOb0bb99Q1", "Q9l0i6DPO08obldq101ldDioiqdIDqlq",
		"I8lidoibqQqoQOqiDi6QiDbP9DIdd989", "P8DoiO0QO6Qb8iiP9D1IQ080lQQPD6ll", "DDDiQOd1IQQ6QIIq09PDqdQdDIll6bQI", "POoldOddQl9Dbq8b6iOP0iPoQd6IdOPl", "I9iODl9bl1d8PilOilii9Dd19PP6QI66",
		"biqbD9I9q9D16i0i1Idb9d111l1QDq86", "91dD6iqPO066do99169POPbQPbo9o6oq", "lIQ1608o9O6bdoPO0ooi8io8i6q6bO1b", "iQP6PI8oDQi1OPQObDQO1IIP9I8i0I1o", "P66d8iQQIIQO96qoDdIqi9l19i69D9Dq",
		"Q96Qo0qbQ81odQoqPOOQ98oDbo6Pb1IO", "lQ86Pod1b9oI8OiDDoId099di9OI8d9I", "D68PQib86POo9D6O8Q0qO8bD6bDb1bdl", "OQbPdOIo6dPPIq6d8qid6DbPP0q991i6", "QoODOoqDli0bOoqqDo8ODo1lDI9llblo",
		"Dlq6qdP1bOPDObbbQQ6b8iPbd1ODq69P", "QoId0biOD18610ii0DDP61QqOl6qq86q", "oDQqbI86bdlqbiO1dbiDP0PDd91bI6iP", "q1qI0QibDDP6oPdl8DlIlPo80DqDd66P", "II8Dlo69PoPOII9P88qdlQPP8I61DlDo",
		"liq91ddlPQ16iooqDDQ86qlodIO10Qb1", "q0QIob1PDI6IP86dlPb6I6il9d6bP606", "Pi69o0idP1obO9QDqIDbPdqlb90q8Dq8", "iIPq9q8PQDDObo610oQoi0ob96PDi8li", "Io1D1l9QiDo6IDObd8qo1Q9lQ6iollQ9",
		"Dl690bPIlIq0Ol1PdPbb9QO0I66lIqO0", "P160qOD09PQoOPI6iIOO69qDoqQl1qDQ", "oOOI98q81oQQQP88d6Q6qlbl8QI9d0dI", "lO8O011qIqioPDi9d0oib09DDDPIbqOI", "QlQ9Qb00bI0ob9oDIiPqO1QdQ0o6O0O6",
		"l1bDOIlb6ddI6od0q1llI0I6blq9oP0l", "6doo1dQ16Ol86oIbQ19PPldI8lIbP0OI", "6iq1dqQ1PDQlDO0bio0l89oDDDi6b0oD", "Q86b6I1Qi6Q918l6iOoOQl866oQoIQOi", "668Q8qQdqoIQQiIQOilDqd8lDOOQ8bDQ",
		"ibdIdIO60b880i8oPOdQD9qIqldOdDl8", "D16P668Q8loqIoDo1IdoIlIloiIoIDll", "160Oo1q8DolI6068lQi66OQbQ9Q8ODQI", "1Q809666i9oblO8qO688OiD6OIbiP0Oq", "1qdb8P8il9li6DOdPolq9d0d9Q6898oi",
		"Ibd8d0bllqOo61lqlQPd8lP01D0Qb9o6", "I6Dd0QIi086il1918dQI6dq0l1d9ibD0", "Qb1db18qP1Ib6liPI1668Pq8QPb0QO09", "0Qb8PDoQ06Q66obPI1P988oI61ioPb6l", "oOI18qilo91qPQl9Q0l9iliO96Pi6DIi",
		"i8O81i0iQdqiI8qqP0oo8IPl9IoId1bO", "id0QqdbI8oloO9l08IqI9q1D0819OQID", "dDlDPddq08iD8IOb9I1PbODP9696966D", "qD6P1ldl09Dqq8QP01bbid0b9IdqobPl", "ObbOibP0ll9I00di6i9oO1qlIQbdD0ql",
		"PqOilI0ql6QDID6oo0Qb9iDo1doqQqPQ", "I0qiD6Ob86D1oQOib81lID6Dll8iOOOP", "dP88i6I9b9QPQDPPO90POOIo0Il6QloI", "DoQi6oPoD9DlO0898oo0ol0qoo6891Db", "0ddPq801D8PiiqO1oqoQbdOIQ9lQl11o",
		"8i9llqdbQ6qP611I90lldPq1o1oQl69o", "PloPqd6Q19Q990dl16I0Qi06i0l8o168", "dOblQOoDb96l00dqPlIb9DQl86q9PboI", "96d9qiDD8l09DQq6O1DO6O6I1IdP8q0D", "Dl69Pb9OQDlbOi80OQdIObiQ1Q08Dlqo",
		"06DO8bb0O891IQ9QP01diqOOl0D80QbO", "D686d06lO9IID8D0boPq0Pd8P89idO99", "811o6o1QPP0lPiolI1ObiD99l08o1dQl", "DQO6qbiP6dldo6IIqlob9i8dqiqOio6o", "iqiqod1l08DlDql98QOi10oibldd8b86",
		"db1DlQ9qqI8PiqPD6q88O1P8PDbP11dq", "Qq6D900bD60PddqqbdQb96Pd60918100", "I6q1PQ1D1Dblli8Iilo9ood8DbbQlb8O", "b9QiIQ18b6o1bqPdqI6lI1OIqboPIDI9", "1dq6Oq918dIQb1doqQdbiPPPO9lIdl0P",
		"Q8Q6d00DoIiPolOb9PIO0Pll96O0I1qD", "od66Qb16lI019I06lllII811I9ol6l0i", "OoqbDO180q18oqi1ooO1QIdOoOPl69b1", "0bDqIO9Q0PPIPlPll1D8Pbol9O6DlPdb", "D08qoOdPd8iOO916bOPIIIdqPP6O00iP",
		"D08lqQOPdOO6D6ll690Qd6PdbO111011", "oQ9QDQ6I9oo9DP8Oi86id61o9Pbbl9bD", "QQOOldqQ8QQDQ06i81d9DP9PlOlo1lqq", "o91qiqqDi9b6d6l1dQ6qO6oO0QDIlPql", "91qD6DbDqi96qbIO66oboliPD8IPP6io",
	}

	// Run test
	songIds, err := SongIdsForClient(c)
	if len(songIds) != len(expectedSongIds) {
		t.Errorf("song id count did not match: expected %d but got %d", len(expectedSongIds), len(songIds))
	}
	for i, _ := range songIds {
		found := false
		for j, _ := range expectedSongIds {
			if songIds[i] == expectedSongIds[j] {
				found = true
				break
			}
		}
		if !found {
			t.Errorf("song id %s was not found in expectedSongIds", songIds[i])
		}
	}
}

func TestSongDataFromDocument(t *testing.T) {
	// Setup test
	const testFile = "./test_data/music_detail/1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9.html"
	const testId = "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9"

	// Setup expected results
	expectedSongData := ddr_models.Song{
		Id:           testId,
		Name:         "printemps",
		Artist:       "Qrispy Joybox",
		Image:        "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",
	}

	// Run Test
	document, err := documentFromFile(testFile)
	if err != nil {
		t.Fatalf("could not load %s: %s", testFile, err.Error())
	}

	songData := songDataFromDocument(document, testId)
	if  songData.Id != expectedSongData.Id ||
		songData.Name != expectedSongData.Name ||
		songData.Artist != expectedSongData.Artist ||
		songData.Image != expectedSongData.Image {
		t.Errorf("song data for song %s did not match expected data of %+#v got %+#v", testId, expectedSongData, songData)
	}
}

func TestSongDataForClient(t *testing.T) {
	// Setup test
	const musicDetailDir = "./test_data/music_detail"
	const musicDetailUri = "https://p.eagate.573.jp/game/ddr/ddra20/p/playdata/music_detail.html?index={songid}"
	songIds := make([]string, 0)
	uriMapping := make(map[string]string)
	files, err := ioutil.ReadDir(musicDetailDir)
	if err != nil {
		t.Fatalf("failed to load file list from dir %s", musicDetailDir)
	}
	for _, file := range files {
		separator := strings.Index(file.Name(), ".")
		uri := strings.Replace(musicDetailUri, "{songid}", file.Name()[:separator], -1)
		songIds = append(songIds, file.Name()[:separator])
		uriMapping[uri] = fmt.Sprintf("%s/%s", musicDetailDir, file.Name())
	}

	c, s := testServerAndClient(uriMapping)
	defer s.Close()

	// Setup expected results
	expectedSongData := []ddr_models.Song {
		{
			Id:           "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Name:         "printemps",
			Artist:       "Qrispy Joybox",
			Image:        "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",

		},
		{
			Id:			  "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Name:         "アルストロメリア (walk with you remix)",
			Artist:       "TAG",
			Image:        "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",
		},
	}

	songData, err := SongDataForClient(c, songIds)
	if err != nil {
		t.Fatal("error loading song data for client")
	}

	for _, data := range songData {
		found := false
		for _, expectedData := range expectedSongData {
			if  data.Id == expectedData.Id &&
				data.Name == expectedData.Name &&
				data.Artist == expectedData.Artist &&
				data.Image == expectedData.Image {
				found = true
				break
			}
		}
		if !found {
			t.Errorf("song data for song %s did not match any expected: got %+#v", data.Id, data)
		}
	}
}

func TestSongDifficultiesFromDocument(t *testing.T) {
	// Setup test
	const testFile = "./test_data/music_detail/1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9.html"
	const testId = "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9"

	// Setup expected results
	expectedSongDifficulties := []ddr_models.SongDifficulty{
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "BEGINNER",
			DifficultyValue: 3,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "BASIC",
			DifficultyValue: 6,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "DIFFICULT",
			DifficultyValue: 10,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "EXPERT",
			DifficultyValue: 13,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "CHALLENGE",
			DifficultyValue: -1,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "DOUBLE",
			Difficulty:      "BASIC",
			DifficultyValue: 6,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "DOUBLE",
			Difficulty:      "DIFFICULT",
			DifficultyValue: 10,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "DOUBLE",
			Difficulty:      "EXPERT",
			DifficultyValue: 14,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "DOUBLE",
			Difficulty:      "CHALLENGE",
			DifficultyValue: -1,
		},
	}

	// Run Test
	document, err := documentFromFile(testFile)
	if err != nil {
		t.Fatalf("could not load %s: %s", testFile, err.Error())
	}

	songDifficulties := songDifficultiesFromDocument(document, testId)

	for _, data := range songDifficulties {
		found := false
		for _, expectedData := range expectedSongDifficulties {
			if  data.SongId == expectedData.SongId &&
				data.Difficulty == expectedData.Difficulty &&
				data.Mode == expectedData.Mode &&
				data.DifficultyValue == expectedData.DifficultyValue {
				found = true
				break
			}
		}
		if !found {
			t.Errorf("song data for song %s did not match any expected, got: %+#v", data.SongId, data)
		}
	}
}

func TestSongDifficultiesForClient(t *testing.T) {
	// Setup test
	const musicDetailDir = "./test_data/music_detail"
	const musicDetailUri = "https://p.eagate.573.jp/game/ddr/ddra20/p/playdata/music_detail.html?index={songid}"
	songIds := make([]string, 0)
	uriMapping := make(map[string]string)
	files, err := ioutil.ReadDir(musicDetailDir)
	if err != nil {
		t.Fatalf("failed to load file list from dir %s", musicDetailDir)
	}
	for _, file := range files {
		separator := strings.Index(file.Name(), ".")
		uri := strings.Replace(musicDetailUri, "{songid}", file.Name()[:separator], -1)
		songIds = append(songIds, file.Name()[:separator])
		uriMapping[uri] = fmt.Sprintf("%s/%s", musicDetailDir, file.Name())
	}

	c, s := testServerAndClient(uriMapping)
	defer s.Close()

	// Setup expected results
	expectedSongDifficulties := []ddr_models.SongDifficulty{
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "BEGINNER",
			DifficultyValue: 3,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "BASIC",
			DifficultyValue: 6,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "DIFFICULT",
			DifficultyValue: 10,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "EXPERT",
			DifficultyValue: 13,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "SINGLE",
			Difficulty:      "CHALLENGE",
			DifficultyValue: -1,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "DOUBLE",
			Difficulty:      "BASIC",
			DifficultyValue: 6,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "DOUBLE",
			Difficulty:      "DIFFICULT",
			DifficultyValue: 10,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "DOUBLE",
			Difficulty:      "EXPERT",
			DifficultyValue: 14,
		},
		{
			SongId:          "1PoOQPd0D01Q9O0doiQQQ8D8Q096bDq9",
			Mode:            "DOUBLE",
			Difficulty:      "CHALLENGE",
			DifficultyValue: -1,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "SINGLE",
			Difficulty:      "BEGINNER",
			DifficultyValue: 3,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "SINGLE",
			Difficulty:      "BASIC",
			DifficultyValue: 6,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "SINGLE",
			Difficulty:      "DIFFICULT",
			DifficultyValue: 8,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "SINGLE",
			Difficulty:      "EXPERT",
			DifficultyValue: 11,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "SINGLE",
			Difficulty:      "CHALLENGE",
			DifficultyValue: 13,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "DOUBLE",
			Difficulty:      "BASIC",
			DifficultyValue: 6,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "DOUBLE",
			Difficulty:      "DIFFICULT",
			DifficultyValue: 8,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "DOUBLE",
			Difficulty:      "EXPERT",
			DifficultyValue: 12,
		},
		{
			SongId:          "8bQQ0lP96186D8Ibo8IoOd6o16qioiIo",
			Mode:            "DOUBLE",
			Difficulty:      "CHALLENGE",
			DifficultyValue: 13,
		},
	}

	songDifficulties, err := SongDifficultiesForClient(c, songIds)
	if err != nil {
		t.Fatal("error loading song difficulties for client")
	}

	for _, data := range songDifficulties {
		found := false
		for _, expectedData := range expectedSongDifficulties {
			if  data.SongId == expectedData.SongId &&
				data.Difficulty == expectedData.Difficulty &&
				data.Mode == expectedData.Mode &&
				data.DifficultyValue == expectedData.DifficultyValue {
				found = true
				break
			}
		}
		if !found {
			t.Errorf("song data for song %s did not match any expected, got: %+#v", data.SongId, data)
		}
	}
}